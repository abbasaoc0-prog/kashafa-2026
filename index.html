<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ÙƒØ´Ø§ÙØ© - Ø§Ù„Ø±Ø§Ù‡ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Reem+Kufi:wght@500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <style>
        :root { --gold: #D4AF37; --dark: #1a1a1a; }
        body { font-family: 'Reem Kufi', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        .gold-text { color: var(--gold); font-family: 'Amiri', serif; }
        .gold-border { border: 2px solid var(--gold); }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø© */
        header h1 { font-size: 1.8rem !important; }
        .nav-square { border-radius: 20px; transition: 0.3s; cursor: pointer; background: #262626; padding: 15px; }
        .nav-square:hover { transform: scale(1.05); background: #333; }
        
        #cert-box { 
            background: #fff; color: #000; padding: 20px; border: 10px double var(--gold);
            width: 95%; max-width: 500px; margin: auto; text-align: center; display: none;
        }
        #cert-box h3 { font-family: 'Amiri', serif; color: #8b6b23; font-size: 2.5rem; }

        .full-page { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--dark); z-index: 50; display: none; flex-direction: column; overflow-y: auto;
        }
        .hidden { display: none; }
        .opt-btn { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid var(--gold); border-radius: 10px; text-align: right; transition: 0.3s; }
        .opt-btn:hover { background: var(--gold); color: black; }
    </style>
</head>
<body>

    <div id="home" class="min-h-screen p-4 flex flex-col items-center">
        <header class="text-center my-8">
            <h1 class="gold-text text-4xl mb-2">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</h1>
            <h2 class="text-xl opacity-80">Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ÙƒØ´ÙÙŠØ© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</h2>
        </header>

        <div class="grid grid-cols-2 gap-4 w-full max-w-md">
            <div onclick="showSection('quiz-init')" class="nav-square flex flex-col items-center">
                <span class="text-4xl mb-2">ğŸ†</span>
                <h3>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
            </div>
            <div onclick="showSection('gallery-view')" class="nav-square flex flex-col items-center">
                <span class="text-4xl mb-2">ğŸ–¼ï¸</span>
                <h3>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</h3>
            </div>
        </div>

        <div id="quote-box" class="mt-12 p-6 gold-border rounded-xl text-center w-full max-w-md italic opacity-90">
            </div>
    </div>

    <div id="gallery-view" class="full-page p-4">
        <div class="flex justify-between items-center mb-6">
            <h2 class="gold-text text-2xl">Ø§Ù„Ù…Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ´ÙÙŠ</h2>
            <button onclick="hideSection('gallery-view')" class="text-red-500">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
        <div class="grid grid-cols-2 gap-2" id="gallery-grid">
            </div>
        <button onclick="checkAdmin()" class="mt-8 opacity-20 text-xs text-center w-full">ADMIN</button>
    </div>

    <div id="quiz-init" class="full-page p-6 flex-col justify-center items-center">
        <h2 class="gold-text text-3xl mb-6">Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</h2>
        <input type="text" id="p-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙˆØ§Ù„Ù„Ù‚Ø¨" class="w-full p-4 rounded bg-gray-800 border border-gold mb-4 text-center">
        <button onclick="startChallenge()" class="bg-yellow-600 text-white px-10 py-3 rounded-full text-xl font-bold">Ø¨Ø§Ø³Ù… Ø§Ù„Ù„Ù‡ Ù†Ø¨Ø¯Ø£</button>
        <button onclick="hideSection('quiz-init')" class="mt-4 text-gray-400">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <div id="quiz-main" class="full-page p-6 hidden">
        <div id="q-container" class="w-full max-w-md mx-auto">
            <div class="mb-4 text-gold" id="q-count">Ø§Ù„Ø³Ø¤Ø§Ù„ 1</div>
            <h3 id="q-text" class="text-2xl mb-8 leading-relaxed">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h3>
            <div id="options" class="flex flex-col"></div>
        </div>
    </div>

    <div id="cert-view" class="full-page p-4 justify-center items-center">
        <div id="cert-box">
            <p>ØªØ´Ù‡Ø¯ Ø§Ù„Ø£Ù…Ø§Ù†Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø£Ù† Ø§Ù„Ø¨Ø·Ù„:</p>
            <h3 id="cert-name">Ø§Ù„Ø±Ø§Ù‡ÙŠ</h3>
            <p>Ù‚Ø¯ Ø§Ø¬ØªØ§Ø² Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ù…Ø¹Ø¯Ù„</p>
            <h1 class="text-5xl font-bold my-4">100%</h1>
            <p class="text-sm opacity-60">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: 2026</p>
        </div>
        <button onclick="location.reload()" class="mt-6 bg-gold text-black px-6 py-2 rounded">Ø®Ø±ÙˆØ¬</button>
    </div>

    <script>
        // --- Ø§Ù„ÙØ§ÙŠØ±Ø¨ÙŠØ² (Ø¨Ø¯Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠÙƒ) ---
        const firebaseConfig = {
            apiKey: "AIzaSy...",
            authDomain: "your-app.firebaseapp.com",
            projectId: "your-app",
            storageBucket: "your-app.appspot.com",
            messagingSenderId: "...",
            appId: "..."
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ (Ø¹) ---
        const hq = [
            "Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù ØµÙÙ†Ù’ÙÙØ§Ù†Ù: Ø¥ÙÙ…ÙÙ‘Ø§ Ø£ÙØ®ÙŒ Ù„ÙÙƒÙ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†ÙØŒ Ø£ÙÙˆÙ’ Ù†ÙØ¸ÙÙŠØ±ÙŒ Ù„ÙÙƒÙ ÙÙÙŠ Ø§Ù„Ù’Ø®ÙÙ„Ù’Ù‚Ù.",
            "Ù…ÙØ§ Ø¶ÙØ§Ø¹Ù Ø§Ù…Ù’Ø±ÙØ¤ÙŒ Ø¹ÙØ±ÙÙÙ Ù‚ÙØ¯Ù’Ø±ÙÙ‡Ù.",
            "Ø§Ù„Ù’Ø¹ÙÙ„Ù’Ù…Ù Ù†ÙÙ‡Ù’Ø±ÙŒØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙƒÙ’Ù…ÙØ©Ù Ø¨ÙØ­Ù’Ø±ÙŒ.",
            "Ø£ÙÙƒÙ’Ø±ÙÙ…Ù’ Ø¶ÙÙŠÙ’ÙÙÙƒÙ ÙˆÙØ¥ÙÙ†Ù’ ÙƒÙØ§Ù†Ù Ø­ÙÙ‚ÙÙŠØ±Ø§Ù‹.",
            "Ù‚ÙÙŠÙ…ÙØ©Ù ÙƒÙÙ„ÙÙ‘ Ø§Ù…Ù’Ø±ÙØ¦Ù Ù…ÙØ§ ÙŠÙØ­Ù’Ø³ÙÙ†ÙÙ‡Ù.",
            "Ø§Ù„Ù’Ø¹ÙÙ„Ù’Ù…Ù Ø®ÙÙŠÙ’Ø±ÙŒ Ù…ÙÙ†Ù Ø§Ù„Ù’Ù…ÙØ§Ù„Ù.",
            "Ù„Ø§ ØºÙÙ†ÙÙ‰ ÙƒÙØ§Ù„Ù’Ø¹ÙÙ‚Ù’Ù„ÙØŒ ÙˆÙÙ„Ø§ ÙÙÙ‚Ù’Ø±Ù ÙƒÙØ§Ù„Ù’Ø¬ÙÙ‡Ù’Ù„Ù.",
            "Ø¥ÙØ°ÙØ§ ØªÙÙ…ÙÙ‘ Ø§Ù„Ù’Ø¹ÙÙ‚Ù’Ù„Ù Ù†ÙÙ‚ÙØµÙ Ø§Ù„Ù’ÙƒÙÙ„Ø§Ù…Ù."
        ];

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ†Ù‚Ù„ ÙˆÙ…Ù†Ø¹ Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ ---
        function showSection(id) {
            document.getElementById(id).style.display = 'flex';
            history.pushState({ section: id }, "");
        }
        function hideSection(id) {
            document.getElementById(id).style.display = 'none';
        }
        window.onpopstate = function() {
            document.querySelectorAll('.full-page').forEach(p => p.style.display = 'none');
        };

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ---
        let questions = [];
        let curIdx = 0;
        let rawN = "";

        async function startChallenge() {
            rawN = document.getElementById('p-name').value;
            if(rawN.trim().split(" ").length < 3) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙˆØ§Ù„Ù„Ù‚Ø¨!");
            
            const snap = await db.collection('questions').get();
            questions = snap.docs.map(doc => doc.data());
            
            if(questions.length === 0) return alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.");
            
            document.getElementById('quiz-init').style.display = 'none';
            document.getElementById('quiz-main').classList.remove('hidden');
            document.getElementById('quiz-main').style.display = 'flex';
            showQ();
        }

        function showQ() {
            const q = questions[curIdx];
            document.getElementById('q-count').innerText = `Ø³Ø¤Ø§Ù„ ${curIdx + 1} Ù…Ù† ${questions.length}`;
            document.getElementById('q-text').innerText = q.title;
            const optDiv = document.getElementById('options');
            optDiv.innerHTML = "";
            q.options.forEach(opt => {
                const b = document.createElement('button');
                b.className = "opt-btn";
                b.innerText = opt;
                b.onclick = () => nextQ(opt === q.correct);
                optDiv.appendChild(b);
            });
        }

        function nextQ(isCorrect) {
            if(!isCorrect) return alert("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            curIdx++;
            if(curIdx < questions.length) showQ();
            else showCert();
        }

        function showCert() {
            document.getElementById('quiz-main').style.display = 'none';
            document.getElementById('cert-view').style.display = 'flex';
            document.getElementById('cert-box').style.display = 'block';
            const parts = rawN.split(" ");
            document.getElementById('cert-name').innerText = parts[0] + " " + parts[parts.length-1];
        }

        // --- Ø§Ù„Ù…Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø£Ù‚ÙˆØ§Ù„ ---
        window.onload = () => {
            document.getElementById('quote-box').innerText = hq[Math.floor(Math.random()*hq.length)];
            const grid = document.getElementById('gallery-grid');
            for(let i=1; i<=15; i++) {
                grid.innerHTML += `<img src="gallery/${i}.jpg" class="w-full h-32 object-cover rounded shadow-lg" onerror="this.style.display='none'">`;
            }
        };

        function checkAdmin() {
            const pw = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:");
            if(pw === "asd.alrahe2001") {
                const t = prompt("Ø§Ù„Ø³Ø¤Ø§Ù„:");
                const o = prompt("Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§Ø±Ø²Ø©):").split(",");
                const c = prompt("Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© (Ù†ÙØ³ Ø§Ù„Ù†Øµ):");
                db.collection('questions').add({ title: t, options: o, correct: c });
                alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­!");
            }
        }
    </script>
</body>
</html>
